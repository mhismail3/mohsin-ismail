/* =============================================================================
   BLOG PAGE STYLES
   Posts listing, pagination, tag filtering
   ============================================================================= */

/* ─────────────────────────────────────────────────────────────────────────────
   TAG CLOUD / FILTER
   ───────────────────────────────────────────────────────────────────────────── */

.filter-row {
  display: flex;
  flex-direction: column;
  gap: var(--space-md);
  margin-top: var(--space-base);
}

.tag-cloud {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-sm);
  align-items: center;
}

/* Scaled tag cloud: compact gaps, center-aligned for visual balance */
.tag-cloud--scaled {
  gap: var(--space-xs) var(--space-sm);
  align-items: center;
}

.active-tags {
  display: flex;
  align-items: center;
  justify-content: flex-start;
  gap: var(--space-sm);
  flex-wrap: wrap;
}

/* During filter transition, just disable interaction (no fade-out) */
.active-tags.fading-out {
  pointer-events: none;
}

/* Fade-in animation for active tag pills - elegant with subtle scale */
@keyframes activeTagFadeIn {
  from {
    opacity: 0;
    transform: translateY(4px) scale(0.96);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

/* Stable tags (already in list) - visible, no animation */
.active-tags:not(.fading-out) .pill.tag-stable {
  opacity: 1;
}

/* Newly added tags - animate in */
.active-tags:not(.fading-out) .pill.tag-entering {
  opacity: 0;
  animation: activeTagFadeIn 260ms cubic-bezier(0.33, 0, 0.2, 1) both;
}

/* Clear button animation - now in panel-head-main, not active-tags */
.posts-panel .panel-head-main .btn {
  opacity: 0; /* Prevent flash before animation */
  animation: activeTagFadeIn 260ms cubic-bezier(0.33, 0, 0.2, 1) both;
  animation-delay: 60ms;
}

/* ─────────────────────────────────────────────────────────────────────────────
   PAGINATION
   ───────────────────────────────────────────────────────────────────────────── */

.pagination {
  display: flex;
  align-items: center;
  justify-content: center;
  flex-wrap: wrap;
  gap: var(--space-md);
  margin-top: 4px;
}

.pagination .btn {
  min-width: 90px;
}

.pagination .muted {
  min-width: 100px;
  text-align: center;
  font-weight: 600;
  font-size: 0.85rem;
  color: var(--color-text-muted);
}

/* Hide arrows by default, show text */
.pagination-arrow {
  display: none;
}

.pagination-text {
  display: inline;
}

/* ─────────────────────────────────────────────────────────────────────────────
   POST PAGE
   ───────────────────────────────────────────────────────────────────────────── */

.back-link {
  display: inline-block;
  margin-bottom: 1.5rem;
  font-size: 0.9rem;
  font-weight: 600;
  color: var(--color-text-muted);
  transition: color var(--theme-transition-duration) var(--theme-transition-ease), 
              transform var(--duration-normal) ease;
}

@media (hover: hover) {
  .back-link:hover {
    color: var(--aero);
    transform: translateX(-4px);
  }
}

/* Active/pressed state for touch feedback */
.back-link:active,
.back-link.tap-active {
  color: var(--aero);
  transform: translateX(-2px);
  transition: transform 0.06s ease-out, color 0.06s ease-out;
}

.post-page-head {
  margin-bottom: 2rem;
}

.post-page-head .eyebrow {
  letter-spacing: 0.1em;
}

.post-page .post-title {
  font-size: var(--text-3xl);
  margin-bottom: 0.5rem;
  line-height: var(--leading-tight);
}

/* ─────────────────────────────────────────────────────────────────────────────
   POST TITLE STYLES - COMBINED LETTERPRESS + SHIMMER EFFECT
   
   Combines two effects for maximum elegance:
   1. Letterpress: 3D embossed depth using drop-shadow (always visible)
   2. Shimmer: Cursor-following green highlight on hover
   
   Uses filter: drop-shadow() instead of text-shadow because it works
   correctly with background-clip: text (which makes text transparent).
   
   Uses @property registered colors from tokens.css for smooth theme transitions.
   
   At rest: Text appears solid with bold depth
   On hover: Green shimmer follows cursor across the embossed text
   ───────────────────────────────────────────────────────────────────────────── */

.post-page .post-title.title-style-shimmer:not(.touch-title),
.title-style-shimmer .post-page .post-title:not(.touch-title),
.title-style-shimmer article.post-page .post-title:not(.touch-title) {
  /* CSS variables for cursor-following shimmer (set by JS)
     --shimmer-x: horizontal position of shimmer center
     --shimmer-width: band width (0% = hidden, 25% = visible) for fade in/out */
  --shimmer-x: 50%;
  --shimmer-width: 0%;
  
  /* ═══════════════════════════════════════════════════════════════════════════
     SOPHISTICATED SHIMMER - Gaussian-like light reflection
     All offsets PROPORTIONAL to --shimmer-width - collapses when width is 0%
     ═══════════════════════════════════════════════════════════════════════════ */
  background: linear-gradient(
    90deg,
    /* Left edge - base color */
    var(--shimmer-base) 0%,
    var(--shimmer-base) calc(var(--shimmer-x) - var(--shimmer-width) * 1.8),
    
    /* Outer glow - very subtle, wide spread (Gaussian tail) */
    color-mix(in srgb, var(--shimmer-accent) 3%, var(--shimmer-base)) calc(var(--shimmer-x) - var(--shimmer-width) * 1.6),
    color-mix(in srgb, var(--shimmer-accent) 8%, var(--shimmer-base)) calc(var(--shimmer-x) - var(--shimmer-width) * 1.4),
    
    /* Inner glow - medium intensity, building up */
    color-mix(in srgb, var(--shimmer-accent) 18%, var(--shimmer-base)) calc(var(--shimmer-x) - var(--shimmer-width) * 1.2),
    color-mix(in srgb, var(--shimmer-accent) 35%, var(--shimmer-base)) calc(var(--shimmer-x) - var(--shimmer-width) * 1.0),
    
    /* Specular hotspot - bright center */
    color-mix(in srgb, var(--shimmer-accent) 65%, var(--shimmer-base)) calc(var(--shimmer-x) - var(--shimmer-width) * 0.5),
    color-mix(in srgb, var(--shimmer-accent) 90%, var(--shimmer-base)) calc(var(--shimmer-x) - var(--shimmer-width) * 0.15),
    var(--shimmer-accent) var(--shimmer-x),
    color-mix(in srgb, var(--shimmer-accent) 90%, var(--shimmer-base)) calc(var(--shimmer-x) + var(--shimmer-width) * 0.15),
    color-mix(in srgb, var(--shimmer-accent) 65%, var(--shimmer-base)) calc(var(--shimmer-x) + var(--shimmer-width) * 0.5),
    
    /* Inner glow - symmetric falloff */
    color-mix(in srgb, var(--shimmer-accent) 35%, var(--shimmer-base)) calc(var(--shimmer-x) + var(--shimmer-width) * 1.0),
    color-mix(in srgb, var(--shimmer-accent) 18%, var(--shimmer-base)) calc(var(--shimmer-x) + var(--shimmer-width) * 1.2),
    
    /* Outer glow - Gaussian tail */
    color-mix(in srgb, var(--shimmer-accent) 8%, var(--shimmer-base)) calc(var(--shimmer-x) + var(--shimmer-width) * 1.4),
    color-mix(in srgb, var(--shimmer-accent) 3%, var(--shimmer-base)) calc(var(--shimmer-x) + var(--shimmer-width) * 1.6),
    
    /* Right edge - base color */
    var(--shimmer-base) calc(var(--shimmer-x) + var(--shimmer-width) * 1.8),
    var(--shimmer-base) 100%
  ) !important;
  background-size: 100% 100% !important;
  -webkit-background-clip: text !important;
  background-clip: text !important;
  -webkit-text-fill-color: transparent !important;
  
  /* LETTERPRESS: Layered drop-shadows using semantic variables
     These animate smoothly during theme transitions
     Larger shadows for the bigger post page title */
  filter: 
    drop-shadow(-1px -1px 0 var(--shimmer-highlight))
    drop-shadow(1px 1px 0 var(--shimmer-shadow-1))
    drop-shadow(2px 2px 0 var(--shimmer-shadow-2))
    drop-shadow(2px 2px 0 var(--shimmer-shadow-3)) !important;
  
  /* Prevent text clipping at bottom */
  padding-bottom: 0.15em !important;
  
  /* Transitions - instant position tracking, smooth fade in/out and theme changes
     Note: --shimmer-x has NO transition for instant cursor tracking */
  transition: 
    --shimmer-width 0.4s cubic-bezier(0.4, 0, 0.2, 1),
    --shimmer-base var(--theme-transition-duration) var(--theme-transition-ease),
    --shimmer-accent var(--theme-transition-duration) var(--theme-transition-ease),
    --shimmer-highlight var(--theme-transition-duration) var(--theme-transition-ease),
    --shimmer-shadow-1 var(--theme-transition-duration) var(--theme-transition-ease),
    --shimmer-shadow-2 var(--theme-transition-duration) var(--theme-transition-ease),
    --shimmer-shadow-3 var(--theme-transition-duration) var(--theme-transition-ease),
    filter var(--theme-transition-duration) var(--theme-transition-ease) !important;
}

/* Touch sweep animation - disable --shimmer-x transition during JS-driven animation */
.post-page .post-title.title-style-shimmer.shimmer-sweeping:not(.touch-title),
.title-style-shimmer .post-page .post-title.shimmer-sweeping:not(.touch-title),
.title-style-shimmer article.post-page .post-title.shimmer-sweeping:not(.touch-title) {
  transition:
    --shimmer-width 0.5s cubic-bezier(0.4, 0, 0.2, 1),
    --shimmer-base var(--theme-transition-duration) var(--theme-transition-ease),
    --shimmer-accent var(--theme-transition-duration) var(--theme-transition-ease),
    --shimmer-highlight var(--theme-transition-duration) var(--theme-transition-ease),
    --shimmer-shadow-1 var(--theme-transition-duration) var(--theme-transition-ease),
    --shimmer-shadow-2 var(--theme-transition-duration) var(--theme-transition-ease),
    --shimmer-shadow-3 var(--theme-transition-duration) var(--theme-transition-ease),
    filter var(--theme-transition-duration) var(--theme-transition-ease) !important;
  /* Note: --shimmer-x transition is removed so JS animation is smooth */
}

/* Shimmer hidden state - show solid base color, no gradient
   Prevents collapsed gradient from showing accent color on page load or after hover
   MUST include background-clip: text to properly shape the background */
.post-page .post-title.shimmer-hidden,
.title-style-shimmer .post-page .post-title.shimmer-hidden {
  background: var(--shimmer-base) !important;
  -webkit-background-clip: text !important;
  background-clip: text !important;
  -webkit-text-fill-color: transparent !important;
}

/* ─────────────────────────────────────────────────────────────────────────────
   POST PAGE TITLE - TOUCH DEVICES
   
   Subtle radial color reveal animation for touch screens.
   On tap, a soft green tint slowly breathes outward from center, then fades.
   Uses a radial gradient with very gradual color stops for a gentle effect.
   
   Uses the radial-reveal-touch class added via JS on tap, which allows the
   full animation to play even after the finger is released.
   ───────────────────────────────────────────────────────────────────────────── */

@media (hover: none) {
  .post-page .post-title.touch-title {
    /* Base text color - no shimmer effect */
    color: var(--color-text);
    
    /* CSS variables for radial reveal animation
       --reveal-size: 0% = hidden, 200% = fully revealed
       --reveal-opacity: controls the intensity of the green tint */
    --reveal-size: 0%;
    --reveal-opacity: 0;
    
    /* Subtle radial gradient - soft green tint that fades very gradually
       Uses color-mix to blend a muted green with the base text color */
    background: radial-gradient(
      ellipse at 50% 50%,
      color-mix(in srgb, var(--pine) calc(var(--reveal-opacity) * 35%), var(--color-text)) 0%,
      color-mix(in srgb, var(--pine) calc(var(--reveal-opacity) * 25%), var(--color-text)) calc(var(--reveal-size) * 0.3),
      color-mix(in srgb, var(--pine) calc(var(--reveal-opacity) * 15%), var(--color-text)) calc(var(--reveal-size) * 0.6),
      color-mix(in srgb, var(--pine) calc(var(--reveal-opacity) * 5%), var(--color-text)) calc(var(--reveal-size) * 0.85),
      var(--color-text) var(--reveal-size),
      var(--color-text) 100%
    );
    background-size: 100% 100%;
    -webkit-background-clip: text;
    background-clip: text;
    -webkit-text-fill-color: transparent;
    
    /* Smooth transitions for theme changes */
    transition: 
      --reveal-size 0s,
      --reveal-opacity 0s,
      color var(--theme-transition-duration) var(--theme-transition-ease);
  }
  
  /* Animating state - triggered via JS class for full animation */
  .post-page .post-title.touch-title.radial-reveal-touch {
    animation: radial-reveal 2.4s cubic-bezier(0.25, 0.1, 0.25, 1) forwards;
  }
}

/* Radial reveal animation - slow, gentle breathing effect */
@keyframes radial-reveal {
  0% {
    --reveal-size: 0%;
    --reveal-opacity: 0;
  }
  /* Fade in the tint as it starts expanding */
  15% {
    --reveal-size: 40%;
    --reveal-opacity: 1;
  }
  /* Continue expanding at full tint */
  45% {
    --reveal-size: 200%;
    --reveal-opacity: 1;
  }
  /* Hold briefly, then start fading */
  60% {
    --reveal-size: 200%;
    --reveal-opacity: 0.7;
  }
  /* Gentle fade out */
  100% {
    --reveal-size: 200%;
    --reveal-opacity: 0;
  }
}

.post-tags {
  margin-top: 1.5rem;
  margin-bottom: 0.75rem;
}

.post-footer {
  margin-top: 1.5rem;
  padding-top: 1.25rem;
  padding-bottom: 1.25rem;
  margin-bottom: -0.4rem;
  border-top: 1px solid var(--color-border);
}

/* ─────────────────────────────────────────────────────────────────────────────
   POST NAVIGATION (Previous/Next)
   ───────────────────────────────────────────────────────────────────────────── */

.post-nav {
  display: flex;
  justify-content: space-between;
  gap: var(--space-lg);
}

.post-nav-link {
  display: flex;
  flex-direction: column;
  gap: 0.15rem;
  max-width: 45%;
  transition: transform var(--duration-normal) ease,
              color var(--theme-transition-duration) var(--theme-transition-ease);
}

.post-nav-prev {
  align-items: flex-start;
  text-align: left;
}

.post-nav-next {
  align-items: flex-end;
  text-align: right;
}

@media (hover: hover) {
  .post-nav-link:hover {
    transform: translateY(-2px);
  }

  .post-nav-prev:hover {
    transform: translateX(-4px);
  }

  .post-nav-next:hover {
    transform: translateX(4px);
  }
}

/* Active/pressed state for touch feedback */
.post-nav-link:active,
.post-nav-link.tap-active {
  transform: translateY(1px);
  transition: transform 0.06s ease-out;
}

.post-nav-link:active .post-nav-label,
.post-nav-link:active .post-nav-title,
.post-nav-link.tap-active .post-nav-label,
.post-nav-link.tap-active .post-nav-title {
  color: var(--aero);
  transition: color 0.06s ease-out;
}

.post-nav-prev:active,
.post-nav-prev.tap-active {
  transform: translateX(-2px);
}

.post-nav-next:active,
.post-nav-next.tap-active {
  transform: translateX(2px);
}

.post-nav-label {
  font-size: 0.9rem;
  font-weight: 600;
  color: var(--color-text-muted);
  transition: color var(--theme-transition-duration) var(--theme-transition-ease);
}

.post-nav-title {
  font-family: var(--font-body);
  font-size: 0.88rem;
  font-style: italic;
  font-weight: 500;
  color: var(--color-text-muted);
  line-height: 1.4;
  transition: color var(--theme-transition-duration) var(--theme-transition-ease);
}

@media (hover: hover) {
  .post-nav-link:hover .post-nav-label,
  .post-nav-link:hover .post-nav-title {
    color: var(--aero);
  }
}

.post-nav-spacer {
  flex: 1;
}

/* ─────────────────────────────────────────────────────────────────────────────
   RESPONSIVE - DESKTOP
   ───────────────────────────────────────────────────────────────────────────── */

@media (min-width: 840px) {
  .filter-row {
    flex-direction: row;
    align-items: center;
    justify-content: space-between;
  }
}

/* ─────────────────────────────────────────────────────────────────────────────
   RESPONSIVE - SMALL MOBILE
   ───────────────────────────────────────────────────────────────────────────── */

@media (max-width: 480px) {
  .post-nav-link {
    max-width: 50%;
  }
}

@media (max-width: 380px) {
  .pagination {
    flex-wrap: nowrap;
    gap: var(--space-sm);
  }
  
  .pagination .btn {
    min-width: auto;
    width: 36px;
    height: 36px;
    padding: 0;
    position: relative;
  }
  
  .pagination .muted {
    min-width: auto;
    font-size: 0.85rem;
  }
  
  /* Show arrows, hide text */
  .pagination-text {
    display: none;
  }
  
  .pagination-arrow {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 100%;
    height: 100%;
    font-size: 1rem;
    line-height: 1;
    position: absolute;
    top: 0;
    left: 0;
  }
}



